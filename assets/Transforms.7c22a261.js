import{c as a,a as i,b as e,d as o,p as h}from"./mat4.a2b2ab51.js";class l{constructor(t,r,s){this.stack=[],this.program=t,this.camera=r,this.canvas=s,this.modelViewMatrix=a(),this.projectionMatrix=a(),this.normalMatrix=a(),this.calculateModelView(),this.updatePerspective(),this.calculateNormal()}calculateModelView(){this.modelViewMatrix=this.camera.getViewTransform()}calculateNormal(){i(this.normalMatrix,this.modelViewMatrix),e(this.normalMatrix,this.normalMatrix),o(this.normalMatrix,this.normalMatrix)}updatePerspective(){h(this.projectionMatrix,this.camera.fov,this.canvas.width/this.canvas.height,this.camera.minZ,this.camera.maxZ)}setMatrixUniforms(){this.calculateNormal(),this.program.setUniform("uModelViewMatrix","mat4",this.modelViewMatrix),this.program.setUniform("uProjectionMatrix","mat4",this.projectionMatrix),this.program.setUniform("uNormalMatrix","mat4",this.normalMatrix)}push(){const t=a();i(t,this.modelViewMatrix),this.stack.push(t)}pop(){return this.stack.length?this.modelViewMatrix=this.stack.pop():null}}export{l as T};
